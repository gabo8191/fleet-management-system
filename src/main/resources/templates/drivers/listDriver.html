<!DOCTYPE html>
<html
        xmlns:th="http://www.thymeleaf.org"
        xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
<head
        th:replace="~{fragments/fragments :: head('Conductores Disponibles')}"
></head>

<body>
<div th:replace="~{fragments/fragments :: ${#authorization.expression('hasRole(''ADMIN'')') ? 'admin-header' : 'general-header'}}"></div>

<div class="container mt-4">
    <div class="card">
        <div class="card-header">
            <h4>Conductores Disponibles</h4>
        </div>
        <div class="card-body">
            <div th:if="${drivers.isEmpty()}" class="alert alert-info">
                No hay conductores registrados en el sistema.
            </div>

            <div th:if="${!drivers.isEmpty()}" class="table-responsive">
                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Licencia</th>
                        <th>Experiencia</th>
                        <th sec:authorize="hasRole('ADMIN')">Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="driver : ${drivers}">
                        <td th:text="${driver.id}"></td>
                        <td th:text="${driver.getUser().getFirstName()}"></td>
                        <td th:text="${driver.getLicenseNumber()}"></td>
                        <td th:text="${driver.getExperienceYears()}"></td>
                        <td sec:authorize="hasRole('ADMIN')">
                            <a
                                    th:if="${driver.getVehicleAssignments().isEmpty()}"
                                    th:href="@{/assignments/new}"
                                    class="btn btn-sm btn-primary"
                            >
                                <i class="bi bi-car-front me-1"></i>Asignar a Veh√≠culo
                            </a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div th:replace="~{fragments/fragments :: footer}"></div>
<div th:replace="~{fragments/fragments :: scripts}"></div>
</body>
</html>
